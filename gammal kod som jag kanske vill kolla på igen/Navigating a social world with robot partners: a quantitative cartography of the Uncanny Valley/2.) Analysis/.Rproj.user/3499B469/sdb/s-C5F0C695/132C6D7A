{
    "contents" : "\n################################# READ IN DATA #################################\n\nsetwd(\"~/Dropbox/Uncanny Valley Projects II/2014-12-26 Re-analyses/TIME CAPSULE/Analysis materials/2. Prepped data/Replication 2A-2B\")\nl = read.csv(\"2015-08-28_replic_1A_likeability_long_prepped.csv\"); dim(l)  # 630\nt = read.csv(\"2015-08-28_replic_1B_trust_long_prepped.csv\"); dim(t)  # 588\n\n# n=105 unique subjects for likability\nlength(unique(l$id))\n\n# n=98 unique subjects for likability\nlength(unique(t$id))\n\nlibrary(lme4)\nlibrary(lmerTest)\nlibrary(lsmeans)\nlibrary(ggplot2)\n\n# first obs by subject\nfirst.l = l[!duplicated(l$id),]; dim(first.l)  # n=105\nfirst.t = t[!duplicated(t$id),]; dim(first.t)  # n=98\n\n\n################################# DESCRIPTIVE #################################\n\n##### Likability #####\n# mean likability\nmean(l$main.rating, na.rm=TRUE)\nt.test(l$main.rating)\n\n# mean by face\naggregate(main.rating ~ face, l, mean)\n\n\n##### Trust #####\n# mean trust\nmean(t$main.rating, na.rm=TRUE)\nt.test(t$main.rating)\n\n# mean by face\naggregate(main.rating ~ robot, t, mean)\n\n\n################################# MIXED MODELS #################################\n\n# likability\nm1 = lmer(main.rating ~ face + (1|id), data=l); summary(m1)\nred = lmer(main.rating ~ (1|id), data=l)\nanova(m1, red)\ncontrast( lsmeans(m1, ~ as.factor(face) ), \"pairwise\" )\n\n# trust\nm2 = lmer(main.rating ~ face + (1|id), data=t); summary(m2)\nred = lmer(main.rating ~ (1|id), data=t)\nanova(m2, red)\ncontrast( lsmeans(m2, ~ as.factor(face) ), \"pairwise\" )\n\n\n\n################################# APPENDIX FIGURE: LIKABILITY #################################\n\n# make dataset with just means and CIs by face\nl2 = aggregate( main.rating ~ face, data=l, FUN=mean )\nl2$ci.lo = aggregate( main.rating ~ face, data=l, FUN=function(x) t.test(x)$conf.int[1] )$main.rating\nl2$ci.hi = aggregate( main.rating ~ face, data=l, FUN=function(x) t.test(x)$conf.int[2] )$main.rating\n\n\np1 = ggplot( l2, aes(x=face, y=main.rating, group=1) ) +\n  geom_errorbar( aes(ymin=ci.lo, ymax=ci.hi), width=0.1, lwd=1.3, col=\"grey\" ) +\n  geom_line(lwd=3) + theme_bw() + \n  geom_point(size=8) +       \n\n  scale_y_continuous(breaks=seq(-50, 50, 10)) +\n  ylab(\"Likability (-100 to +100)\") +\n  xlab(\"Face stimulus\") +\n\n  theme(axis.text.x = element_blank()) +\n  theme(text = element_text(size=28) ) +\n  \n  annotate(\"text\", x=1, y=l2$ci.hi[1] + 3, label = \"a\", size=7) +\n  annotate(\"text\", x=2, y=l2$ci.lo[2] - 3, label = \"b\", size=7) +\n  annotate(\"text\", x=3, y=l2$ci.hi[3] + 3, label = \"a, b\", size=7) +\n  annotate(\"text\", x=4, y=l2$ci.hi[4] + 3, label = \"c\", size=7) +\n  annotate(\"text\", x=5, y=l2$ci.hi[5] + 3, label = \"d\", size=7) +\n  annotate(\"text\", x=6, y=l2$ci.hi[6] + 3, label = \"e\", size=7)\n\nsetwd(\"~/Dropbox/Uncanny Valley Projects II/2014-12-26 Re-analyses/Daz shared folder (UV)/Manuscript/Figures\")\nggsave( filename = paste(Sys.Date(), \"replication_likability.svg\", sep=\"_\"),\n        plot=p1, path=NULL, width=13, height=8, units=\"in\" )\n\n\n\n################################# APPENDIX FIGURE: TRUST #################################\n\n# make dataset with just means and CIs by face\nt2 = aggregate( main.rating ~ face, data=t, FUN=mean )\nt2$ci.lo = aggregate( main.rating ~ face, data=t, FUN=function(x) t.test(x)$conf.int[1] )$main.rating\nt2$ci.hi = aggregate( main.rating ~ face, data=t, FUN=function(x) t.test(x)$conf.int[2] )$main.rating\n\n\np2 = ggplot( t2, aes(x=face, y=main.rating, group=1) ) +\n  geom_errorbar( aes(ymin=ci.lo, ymax=ci.hi), width=0.1, lwd=1.3, col=\"grey\" ) +\n  geom_line(lwd=3) + theme_bw() + \n  geom_point(size=8) +       \n  \n  scale_y_continuous(breaks=seq(0, 70, 5)) +\n  ylab(\"Trust ($ wagered, 0 to 100)\") +\n  xlab(\"Face stimulus\") +\n  \n  theme(axis.text.x = element_blank()) +\n  theme(text = element_text(size=28) ) +\n  \n  annotate(\"text\", x=1, y=t2$ci.lo[1] - 2, label = \"a\", size=7) +\n  annotate(\"text\", x=2, y=t2$ci.lo[2] - 2, label = \"a\", size=7) +\n  annotate(\"text\", x=3, y=t2$ci.hi[3] + 2, label = \"a\", size=7) +\n  annotate(\"text\", x=4, y=t2$ci.hi[4] + 2, label = \"a\", size=7) +\n  annotate(\"text\", x=5, y=t2$ci.hi[5] + 2, label = \"a\", size=7) +\n  annotate(\"text\", x=6, y=t2$ci.hi[6] + 2, label = \"a\", size=7)\n\nsetwd(\"~/Dropbox/Uncanny Valley Projects II/2014-12-26 Re-analyses/Daz shared folder (UV)/Manuscript/Figures\")\nggsave( filename = paste(Sys.Date(), \"replication_trust.svg\", sep=\"_\"),\n        plot=p2, path=NULL, width=13, height=8, units=\"in\")\n\n\n\n",
    "created" : 1487510667094.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3504148630",
    "id" : "132C6D7A",
    "lastKnownWriteTime" : 1442583981,
    "path" : "~/Dropbox/a.Uncanny Valley Projects II/2014-12-26 Re-analyses/Daz shared folder (UV)/TIME CAPSULE for OSF/2.) Analysis/3. Analysis code/Replication 2A-2B/Replication 2A-2B data analysis code (v1).R",
    "project_path" : "3. Analysis code/Replication 2A-2B/Replication 2A-2B data analysis code (v1).R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}